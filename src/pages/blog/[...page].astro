---
import BaseLayout from "$/layouts/BaseLayout.astro";
import Paginator from "$/components/Paginator.astro";
import PostPreviewList from "$/components/PostPreviewList.astro";
import { SITE } from "$/config";
import { PostMetadata } from "$/types";
import { getPosts } from "$/utils";

const title = "Blog";
const description = "All the articles posted so far...";
export async function getStaticPaths({ paginate }) {
  const files = await Astro.glob<PostMetadata>("../../data/blog-posts/*.md");
  const posts = getPosts(files);
  return paginate(posts, { pageSize: SITE.postsPerPage });
}
const { page } = Astro.props;
---
<BaseLayout content={{ title, description }}>
    <PostPreviewList posts={page.data} />
    <Paginator page={page} />
</BaseLayout>
